var draw=function(){var t,e,n,a,i=document.querySelector("main").offsetWidth,r=document.querySelector("main").offsetHeight,o=document.createElement("canvas"),d=o.getContext("2d"),l=o.getBoundingClientRect(),c=0,s=0,u=0,f=0,h=0,m=0,g="",w=!1,S=!1,v=!1,E=!1,k=!1;return{setXY:function(t){w=c,S=s,c=t.clientX-l.left-o.offsetLeft,s=t.clientY-l.top-o.offsetTop},writeXY:function(){document.getElementById("trackX").innerHTML="X: "+c,document.getElementById("trackY").innerHTML="Y: "+s},setStart:function(){u=c,f=s},setEnd:function(){h=c,m=s},setShape:function(t){g=t},setIsDrawing:function(t){v=t},setRandomFill:function(){E=!E},setRandomStroke:function(){k=!k},draw:function(){d.restore(),this.updateFill(),this.updateStroke(),"rectangle"===g?this.drawRect():"line"===g?this.drawLine():"circle"===g?this.drawCircle():"triangle"===g?this.drawTriangle():"path"===g?this.drawPath():alert("Please choose a shape"),d.save()},drawLine:function(){d.strokeStyle=a,d.beginPath(),d.moveTo(u,f),d.lineTo(h,m),d.stroke()},drawRect:function(){d.fillStyle=n,d.strokeStyle=a,d.fillRect(u,f,h-u,m-f),d.strokeRect(u,f,h-u,m-f)},drawCircle:function(){d.strokeStyle=a,d.fillStyle=n;let t=u-h,e=f-m,i=Math.sqrt(t*t+e*e);d.beginPath(),d.arc(u,f,i,0,2*Math.PI),d.stroke(),d.fill()},drawTriangle:function(){d.strokeStyle=a,d.fillStyle=n;let t=Math.random()*o.width,e=Math.random()*o.height;d.beginPath(),d.moveTo(u,f),d.lineTo(h,m),d.lineTo(t,e),d.lineTo(u,f),d.stroke(),d.fill()},drawPath:function(){d.strokeStyle=a,d.beginPath(),d.moveTo(w,S),d.lineTo(c,s),d.stroke()},clear:function(){d.clearRect(0,0,o.width,o.height)},getCanvas:function(){return o},getShape:function(){return g},getIsDrawing:function(){return v},getFillColor:function(){return n},getStrokeColor:function(){return a},startup:function(){t=document.getElementById("colorWell1"),e=document.getElementById("colorWell2"),t.value="#0000ff",e.value="#0000ff",a="#0000ff",n="#0000ff",t.addEventListener("change",this.updateFill),e.addEventListener("change",this.updateStroke)},updateFill:function(){this.isRandomFill()?n="#"+Math.floor(16777215*Math.random()).toString(16):this.isRandomFill()||(n=t.value)},updateStroke:function(){!0===this.isRandomStroke()?a="#"+Math.floor(16777215*Math.random()).toString(16):!1===this.isRandomStroke()&&(a=e.value)},isRandomFill:function(){return E},isRandomStroke:function(){return k},init:function(){o.width=i,o.height=r,document.querySelector("main").appendChild(o)}}}();draw.init(),draw.getCanvas().addEventListener("mousemove",function(t){draw.setXY(t),draw.writeXY(),"path"==draw.getShape()&&!0===draw.getIsDrawing()&&draw.draw()},!1),document.getElementById("btnLine").addEventListener("click",function(){draw.setShape("line")},!1),document.getElementById("btnRect").addEventListener("click",function(){draw.setShape("rectangle")},!1),document.getElementById("btnCirc").addEventListener("click",function(){draw.setShape("circle")},!1),document.getElementById("btnTri").addEventListener("click",function(){draw.setShape("triangle")},!1),document.getElementById("btnPath").addEventListener("click",function(){draw.setShape("path")},!1),document.getElementById("btnReset").addEventListener("click",function(){draw.clear(),draw.setShape("")},!1),draw.getCanvas().addEventListener("mousedown",function(){draw.setStart(),draw.setIsDrawing(!0)},!1),draw.getCanvas().addEventListener("mouseup",function(){draw.setEnd(),draw.draw(),draw.setIsDrawing(!1)},!1),document.addEventListener("load",draw.startup(),!1),document.getElementById("randFillColor").addEventListener("change",function(){draw.setRandomFill()}),document.getElementById("randStrokeColor").addEventListener("change",function(){draw.setRandomStroke()});